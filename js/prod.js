let landmarks=document.querySelectorAll(".landmark"),landmarksAbout=document.querySelectorAll(".about");document.addEventListener("click",(function(e){nowActive&&e.target.classList.contains("about")&&closeInfo(nowActive)}));let nowActive=null;function showInfo(e){e.classList.add("active"),nowActive=e,map.style.transform="",map.style.left="",map.style.top="",zoom=1}function closeInfo(e){e.style.opacity=0;let t=parseFloat(getComputedStyle(e).transitionDuration);setTimeout((function(){e.classList.remove("active"),e.style.opacity=""}),1e3*t),nowActive=null}for(let e=0;e<landmarks.length;e++)landmarks[e].addEventListener("click",(function(t){showInfo(landmarksAbout[e]),landmarksAbout[e].querySelector(".close").onclick=()=>{closeInfo(landmarksAbout[e])}}));let menu=document.querySelector(".menu"),showDirection=document.querySelector("input[name='show-direction']"),mapImage=document.querySelector(".map"),defaultImage="./images/city_direction.png",directionImage="./images/city3.png";function showMenu(){menu.classList.add("active")}function closeMenu(){menu.classList.remove("active")}menu.addEventListener("mouseover",(function(e){console.log("тутатата"),showMenu()})),menu.addEventListener("mouseout",(function(e){closeMenu()})),showDirection.addEventListener("change",(function(e){showDirection.checked?mapImage.src=defaultImage:mapImage.src=directionImage}));let map=document.documentElement,objs=Array.from(document.querySelectorAll(".about"));const minZoom=1,maxZoom=3,minZoomToOffset=1.5;let zoom=1,[x1,y1]=[null,null],[x2,y2]=[null,null],isMapMoving=!1;function getDirection(e){return e.deltaY>0?"down":"top"}function setZoomMap(e,t){map.style.transform=`scale(${e})`,zoom<1.5&&"down"==t&&(map.style.transform="scale(1)",setOffsetMap(0,0))}function setCorrectZoom(e){"top"==e&&zoom<3?zoom+=.1:"down"==e&&zoom>1&&(zoom+=-.1)}function setOffsetMap(e,t){map.style.left=e+"px",map.style.top=t+"px"}function setContentAllMax(){let e=document.documentElement;e.clientHeight<1e3&&(e.style.height=window.innerHeight+"px")}function setInfoWidthMax(){let e=document.querySelectorAll(".landmark__about"),t=parseFloat(getComputedStyle(document.documentElement).width);for(let o of e)o.style.width=t+"px"}function setCorrectHeightText(){let e=document.querySelectorAll(".about .container");for(let t of e){let e=t.querySelector("h3"),o=t.querySelector(".content"),n=t.clientHeight-2*parseFloat(getComputedStyle(t).paddingTop)-e.clientHeight-parseFloat(getComputedStyle(o).marginTop);o.style.height=n+"px"}}document.addEventListener("wheel",(function(e){if(!objs.some((e=>e.classList.contains("active")))){let t=getDirection(e);setCorrectZoom(t),setZoomMap(zoom,t)}})),map.addEventListener("dragstart",(function(e){e.preventDefault(),x1=e.pageX,y1=e.pageY,isMapMoving=!0})),map.addEventListener("mousemove",(function(e){if(isMapMoving&&zoom>=1.5){x2=e.pageX,y2=e.pageY;let[t,o]=[null,null];if(map.style.left){let e=parseFloat(map.style.left)+(x2-x1)/35,n=parseFloat(map.style.top)+(y2-y1)/35;Math.abs(e)<=550&&(t=e),Math.abs(n)<=400&&(o=n)}else t=x2-x1,o=y2-y1;setOffsetMap(t,o)}})),document.addEventListener("mouseup",(function(e){isMapMoving=!1}));try{window.addEventListener("resize",(()=>{setInfoWidthMax(),setContentAllMax()})),setInfoWidthMax(),setContentAllMax(),setCorrectHeightText()}catch(e){console.error(e)}